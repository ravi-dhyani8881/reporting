<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="users" >
  <resultMap id="baseResultMap" class="com.mobicart.model.User" >
    <result column="username" property="username" jdbcType="VARCHAR" />
    <result column="id" property="id" jdbcType="BIGINT" />
    <result column="password" property="password" jdbcType="VARCHAR" />
    <result column="s_first_name" property="sFirstName" jdbcType="VARCHAR" />
    <result column="s_last_name" property="sLastName" jdbcType="VARCHAR" />
    <result column="d_birthday" property="dBirthday" jdbcType="DATE" />
     <result column="phone_no" property="phoneNo" jdbcType="VARCHAR" />
    <result column="s_company_reg_no" property="sCompanyRegNo" jdbcType="VARCHAR" />
    <result column="s_tax_reg_no" property="sTaxRegNo" jdbcType="VARCHAR" />
    <result column="s_company_logo" property="sCompanyLogo" jdbcType="VARCHAR" />
    <result column="s_paypal_address" property="sPaypalAddress" jdbcType="VARCHAR" />
    <result column="s_heard_from" property="sHeardFrom" jdbcType="VARCHAR" />
    <result column="s_coupon_code" property="sCouponCode" jdbcType="VARCHAR" />
    <result column="s_affiliate_code" property="sAffiliateCode" jdbcType="VARCHAR" />
    <result column="d_joined_on" property="dJoinedOn" jdbcType="TIMESTAMP" />
    <result column="d_updated_on" property="dUpdatedOn" jdbcType="TIMESTAMP" />
    <result column="s_activation_key" property="sActivationKey" jdbcType="VARCHAR" />
    <result column="b_custom_copyright_page" jdbcType="BIT" property="bCustomCopyrightPage" nullValue="0" />
    <result column="s_webapp_url_mapping" property="sWebappUrlMapping" jdbcType="VARCHAR" />
    <result column="s_webapp_domain_name" property="sWebappDomainName" jdbcType="VARCHAR" />
    <result column="b_iphone" property="bIphone" jdbcType="BIT" />
    <result column="b_ipad" property="bIpad" jdbcType="BIT" />
    <result column="b_android" property="bAndroid" jdbcType="BIT" />
    <result column="b_webapp" property="bWebapp" jdbcType="BIT" />
    <result column="disk_space_pricing_id" jdbcType="BIGINT" property="diskSpacePricingId" nullValue="1" />
    <result column="enabled" property="enabled" jdbcType="BIT" />
    <result property="storeName"  column="id" select="stores.selectStoreNameByUserId" />
    <result property="sCurrency"  column="id" select="stores.selectCurrencyByUserId" />
    <result property="iProductCount"  column="id" select="products.selectProductCountByUserId" />
    <result property="storeId" column="id" select="stores.selectStoreIdByUserId"/>
    <result property="storeProductLimit" column="disk_space_pricing_id" select="disk_space_pricing.selectById"/>
    <result column="order_return_url" property="orderReturnUrl" jdbcType="VARCHAR" />
  </resultMap>
  
  
  <resultMap id="userDetailResultMap" class="com.mobicart.model.UserDetail" >
    <result column="s_first_name" property="sFirstName" jdbcType="VARCHAR" />
    <result column="s_last_name" property="sLastName" jdbcType="VARCHAR" />
    <result column="s_company_logo" property="sCompanyLogo" jdbcType="VARCHAR" />
  </resultMap>
  
  <sql id="Example_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 11 19:36:11 IST 2010.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  
  <select id="selectAll" parameterClass="com.mobicart.model.User" resultMap="baseResultMap">
    		select * from users
  	</select>
  
  <select id="selectById" resultMap="baseResultMap"
		parameterClass="long">
		  select username, id, password, s_first_name, s_last_name, d_birthday,phone_no, s_company_reg_no,
      s_tax_reg_no, s_company_logo, s_paypal_address, s_heard_from, s_coupon_code, s_affiliate_code,
      d_joined_on, d_updated_on, s_activation_key,  b_custom_copyright_page, s_webapp_url_mapping,
      s_webapp_domain_name, b_iphone, b_ipad, b_android, b_webapp, disk_space_pricing_id, enabled,
      order_return_url
		from users
		where id = #value#
	</select>
  
  
  <select id="selectUserDetailByUsername" resultMap="userDetailResultMap"
	parameterClass="String">
	select s_first_name, s_last_name, s_company_logo
	from users
	where username = #value#
	</select>
  
  
  
  <select id="selectUserNameById" resultClass="String"
		parameterClass="long">
		select username
		from users
		where id = #value#
	</select>
		
	<select id="selectTerroitoryNameByUser" resultClass="String"
		parameterClass="long">
		
		SELECT t.s_name from territories as t, users_address as u where user_id=#value# AND t.s_code=u.s_country
		
		
	</select>
	
	<select id="selectTerroitoryIdByUser" resultClass="Long"
		parameterClass="long">
		
		SELECT t.id from territories as t, users_address as u where user_id=#value# AND t.s_code=u.s_country
		
		
	</select>
	
	
  <select id="selectCompanyLogoByUserId" resultClass="String"
		parameterClass="long">
		select s_company_logo
		from users
		where id = #value#
	</select>
	
	<select id="selectCopyrightFlagByUserId" resultClass="Boolean"
		parameterClass="long">
		select b_custom_copyright_page
		from users
		where id = #value#
	</select>
  
  
  
  <select id="selectRemoveBrandingByUserId" resultClass="boolean"
		parameterClass="long">
		select b_custom_copyright_page
		from users
		where id = #value#
	</select>
  
  
  <select id="selectFirstNameById" resultClass="String"
		parameterClass="long">
		select s_first_name
		from users
		where id = #value#
	</select>
  
  <select id="selectUsersByKeyword" parameterClass="String" resultMap="baseResultMap" >
    select users.username, users.id, users.password, users.s_first_name, users.s_last_name, users.d_birthday,user.phone_no, users.s_company_reg_no,
      users.s_tax_reg_no, users.s_company_logo,users.s_paypal_address,users.s_heard_from, users.s_coupon_code, users.s_affiliate_code, 
      users.d_joined_on, users.d_updated_on, users.s_activation_key, users.b_custom_copyright_page, users.s_webapp_url_mapping,
      users.s_webapp_domain_name, users.b_iphone, users.b_ipad, users.b_android, users.b_webapp, users.disk_space_pricing_id, users.enabled
      users.order_return_url 
      
    	from users 
    	LEFT JOIN authorities
    	on users.username=authorities.username
    	where authorities.authority='ROLE_USER' 
    	and  ((   users.s_first_name like  #value# )  or (users.s_last_name like  #value#  )  or ( users.username like  #value#  ))                              
  </select>
  
  <select id="selectAdminUsersByKeyword" parameterClass="String" resultMap="baseResultMap" >
    select users.username, users.id, users.password, users.s_first_name, users.s_last_name, users.d_birthday,user.phone_no, users.s_company_reg_no,
      users.s_tax_reg_no, users.s_company_logo,users.s_paypal_address,users.s_heard_from, users.s_coupon_code, users.s_affiliate_code, 
      users.d_joined_on, users.d_updated_on, users.s_activation_key, users.b_custom_copyright_page, users.s_webapp_url_mapping,
      users.s_webapp_domain_name, users.b_iphone, users.b_ipad, users.b_android, users.b_webapp, users.disk_space_pricing_id, users.enabled,
      users.order_return_url
    	from users 
    	LEFT JOIN authorities
    	on users.username=authorities.username
    	where authorities.authority='ROLE_ADMIN' 
    	and  ((   users.s_first_name like  #value# )  or (users.s_last_name like  #value#  )  or ( users.username like  #value#  ))                              
  </select>
   
  
   <select id="selectByActivationKey" parameterClass="String" resultMap="baseResultMap">
   select username, id, password, s_first_name, s_last_name, d_birthday,phone_no, s_company_reg_no,
      s_tax_reg_no, s_company_logo, s_paypal_address, s_heard_from, s_coupon_code, s_affiliate_code,
      d_joined_on, d_updated_on, s_activation_key, b_custom_copyright_page, s_webapp_url_mapping,
      s_webapp_domain_name, b_iphone, b_ipad, b_android, b_webapp, disk_space_pricing_id, enabled,
      order_return_url
    from users
    where s_activation_key = #value#
  </select>
  
  <select id="selectByExample" resultMap="baseResultMap" parameterClass="com.mobicart.model.UserExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 11 19:36:11 IST 2010.
    -->
    select username, id, password, s_first_name, s_last_name, d_birthday,phone_no, s_company_reg_no,
      s_tax_reg_no, s_company_logo, s_paypal_address, s_heard_from, s_coupon_code, s_affiliate_code,
      d_joined_on, d_updated_on, s_activation_key,b_custom_copyright_page, s_webapp_url_mapping,
      s_webapp_domain_name, b_iphone, b_ipad, b_android, b_webapp, disk_space_pricing_id, enabled,
      order_return_url
    from users
    <isParameterPresent >
      <include refid="users.Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="selectByPrimaryKey" resultMap="baseResultMap" parameterClass="com.mobicart.model.User" >
    select username, id, password, s_first_name, s_last_name, d_birthday,phone_no, s_company_reg_no,
      s_tax_reg_no, s_company_logo, s_paypal_address, s_heard_from, s_coupon_code, s_affiliate_code,
      d_joined_on, d_updated_on, s_activation_key,b_custom_copyright_page, s_webapp_url_mapping,
      s_webapp_domain_name, b_iphone, b_ipad, b_android, b_webapp, disk_space_pricing_id, enabled,
      order_return_url
    from users
    where username = #username:VARCHAR#
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="com.mobicart.model.User" >
    delete from users
    where username = #username:VARCHAR#
  </delete>
  <delete id="deleteByExample" parameterClass="com.mobicart.model.UserExample" >
    delete from users
    <include refid="users.Example_Where_Clause" />
  </delete>
  <insert id="insert" parameterClass="com.mobicart.model.User" >
    insert into users (username, id, password, s_first_name, s_last_name, d_birthday,phone_no,
      s_company_reg_no, s_tax_reg_no, s_company_logo, s_paypal_address, s_heard_from, s_coupon_code,
      s_affiliate_code, d_joined_on, d_updated_on, s_activation_key, b_custom_copyright_page, s_webapp_url_mapping,
      s_webapp_domain_name, b_iphone, b_ipad, b_android, b_webapp, disk_space_pricing_id, enabled, order_return_url)
    values (#username:VARCHAR#, #id:BIGINT#, #password:VARCHAR#, #sFirstName:VARCHAR#,
      #sLastName:VARCHAR#, #dBirthday:DATE#,#phoneNo:VARCHAR#, #sCompanyRegNo:VARCHAR#, #sTaxRegNo:VARCHAR#,
      #sCompanyLogo:VARCHAR#, #sPaypalAddress:VARCHAR#, #sHeardFrom:VARCHAR#, #sCouponCode:VARCHAR#,
      #sAffiliateCode:VARCHAR#, #dJoinedOn:TIMESTAMP#, #dUpdatedOn:TIMESTAMP#,
      #sActivationKey:VARCHAR#,#bCustomCopyrightPage:BIT#, #sWebappUrlMapping:VARCHAR#,
      #sWebappDomainName:VARCHAR#, #bIphone:BIT#, #bIpad:BIT#, #bAndroid:BIT#, #bWebapp:BIT#,
      #diskSpacePricingId:BIGINT#, #enabled:BIT#, #orderReturnUrl:VARCHAR#)
      <selectKey resultClass="long" keyProperty="id">
            SELECT LAST_INSERT_ID() AS id
        </selectKey>
  </insert>
  <insert id="insertSelective" parameterClass="com.mobicart.model.User" >
    insert into users
    <dynamic prepend="(" >
      <isNotNull prepend="," property="username" >
        username
      </isNotNull>
      <isNotNull prepend="," property="id" >
        id
      </isNotNull>
      <isNotNull prepend="," property="password" >
        password
      </isNotNull>
      <isNotNull prepend="," property="sFirstName" >
        s_first_name
      </isNotNull>
      <isNotNull prepend="," property="sLastName" >
        s_last_name
      </isNotNull>
      <isNotNull prepend="," property="dBirthday" >
        d_birthday
      </isNotNull>
      <isNotNull prepend="," property="sCompanyRegNo" >
        s_company_reg_no
      </isNotNull>
      <isNotNull prepend="," property="sTaxRegNo" >
        s_tax_reg_no
      </isNotNull>
      <isNotNull prepend="," property="sCompanyLogo" >
        s_company_logo
      </isNotNull>
      <isNotNull prepend="," property="sPaypalAddress" >
        s_paypal_address
      </isNotNull>
      <isNotNull prepend="," property="sHeardFrom" >
        s_heard_from
      </isNotNull>
      <isNotNull prepend="," property="sCouponCode" >
        s_coupon_code
      </isNotNull>
      <isNotNull prepend="," property="sAffiliateCode" >
        s_affiliate_code
      </isNotNull>
      <isNotNull prepend="," property="dJoinedOn" >
        d_joined_on
      </isNotNull>
      <isNotNull prepend="," property="dUpdatedOn" >
        d_updated_on
      </isNotNull>
      <isNotNull prepend="," property="sActivationKey" >
        s_activation_key
      </isNotNull>
      <isNotNull prepend="," property="bCustomCopyrightPage" >
        b_custom_copyright_page
      </isNotNull>
      <isNotNull prepend="," property="sWebappUrlMapping" >
        s_webapp_url_mapping
      </isNotNull>
      <isNotNull prepend="," property="sWebappDomainName" >
        s_webapp_domain_name
      </isNotNull>
      <isNotNull prepend="," property="bIphone" >
        b_iphone
      </isNotNull>
      <isNotNull prepend="," property="bIpad" >
        b_ipad
      </isNotNull>
      <isNotNull prepend="," property="bAndroid" >
        b_android
      </isNotNull>
      <isNotNull prepend="," property="bWebapp" >
        b_webapp
      </isNotNull>
      <isNotNull prepend="," property="diskSpacePricingId" >
        disk_space_pricing_id
      </isNotNull>
      <isNotNull prepend="," property="enabled" >
        enabled
      </isNotNull>
      <isNotNull prepend="," property="orderReturnUrl" >
        order_return_url
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="username" >
        #username:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="id" >
        #id:BIGINT#
      </isNotNull>
      <isNotNull prepend="," property="password" >
        #password:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sFirstName" >
        #sFirstName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sLastName" >
        #sLastName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dBirthday" >
        #dBirthday:DATE#
      </isNotNull>
      <isNotNull prepend="," property="sCompanyRegNo" >
        #sCompanyRegNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sTaxRegNo" >
        #sTaxRegNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sCompanyLogo" >
        #sCompanyLogo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sPaypalAddress" >
        #sPaypalAddress:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sHeardFrom" >
        #sHeardFrom:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sCouponCode" >
        #sCouponCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sAffiliateCode" >
        #sAffiliateCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dJoinedOn" >
        #dJoinedOn:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="dUpdatedOn" >
        #dUpdatedOn:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="sActivationKey" >
        #sActivationKey:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="bCustomCopyrightPage" >
        #b_custom_copyright_page:BIT#
      </isNotNull>
     <isNotNull prepend="," property="sWebappUrlMapping" >
        #sWebappUrlMapping:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sWebappDomainName" >
        #sWebappDomainName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="bIphone" >
        #bIphone:BIT#
      </isNotNull>
      <isNotNull prepend="," property="bIpad" >
        #bIpad:BIT#
      </isNotNull>
      <isNotNull prepend="," property="bAndroid" >
        #bAndroid:BIT#
      </isNotNull>
      <isNotNull prepend="," property="bWebapp" >
        #bWebapp:BIT#
      </isNotNull>
      <isNotNull prepend="," property="diskSpacePricingId" >
        #diskSpacePricingId:BIGINT#
      </isNotNull>
      <isNotNull prepend="," property="enabled" >
        #enabled:BIT#
      </isNotNull>
      <isNotNull prepend="," property="orderReturnUrl" >
        #orderReturnUrl:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <select id="countByExample" parameterClass="com.mobicart.model.UserExample" resultClass="java.lang.Integer" >
    select count(*) from users
    <include refid="users.Example_Where_Clause" />
  </select>


 <update id="removeBranding"  parameterClass="com.mobicart.model.User">
 UPDATE users SET b_custom_copyright_page=#bCustomCopyrightPage:BIT# WHERE id=#id:BIGINT#
 </update>

  <update id="updateByExampleSelective" >
    update users
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.username" >
        username = #record.username:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.id" >
        id = #record.id:BIGINT#
      </isNotNull>
      <isNotNull prepend="," property="record.password" >
        password = #record.password:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.sFirstName" >
        s_first_name = #record.sFirstName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.sLastName" >
        s_last_name = #record.sLastName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.dBirthday" >
        d_birthday = #record.dBirthday:DATE#
      </isNotNull>
       <isNotNull prepend="," property="record.phoneNo" >
        phone_no = #record.phoneNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.sCompanyRegNo" >
        s_company_reg_no = #record.sCompanyRegNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.sTaxRegNo" >
        s_tax_reg_no = #record.sTaxRegNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.sCompanyLogo" >
        s_company_logo = #record.sCompanyLogo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.sPaypalAddress" >
        s_paypal_address = #record.sPaypalAddress:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.sHeardFrom" >
        s_heard_from = #record.sHeardFrom:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.sCouponCode" >
        s_coupon_code = #record.sCouponCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.sAffiliateCode" >
        s_affiliate_code = #record.sAffiliateCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.dJoinedOn" >
        d_joined_on = #record.dJoinedOn:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.dUpdatedOn" >
        d_updated_on = #record.dUpdatedOn:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.sActivationKey" >
        s_activation_key = #record.sActivationKey:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.bCustomCopyrightPage" >
        b_custom_copyright_page=#record.bCustomCopyrightPage:BIT#
      </isNotNull>
      <isNotNull prepend="," property="record.sWebappUrlMapping" >
        s_webapp_url_mapping = #record.sWebappUrlMapping:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.sWebappDomainName" >
        s_webapp_domain_name = #record.sWebappDomainName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.bIphone" >
        b_iphone = #record.bIphone:BIT#
      </isNotNull>
      <isNotNull prepend="," property="record.bIpad" >
        b_ipad = #record.bIpad:BIT#
      </isNotNull>
      <isNotNull prepend="," property="record.bAndroid" >
        b_android = #record.bAndroid:BIT#
      </isNotNull>
      <isNotNull prepend="," property="record.bWebapp" >
        b_webapp = #record.bWebapp:BIT#
      </isNotNull>
      <isNotNull prepend="," property="record.diskSpacePricingId" >
        disk_space_pricing_id = #record.diskSpacePricingId:BIGINT#
      </isNotNull>
      <isNotNull prepend="," property="record.enabled" >
        enabled = #record.enabled:BIT#
      </isNotNull>
      <isNotNull prepend="," property="record.orderReturnUrl" >
        order_return_url = #record.orderReturnUrl:VARCHAR#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="users.Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="updateByExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 11 19:36:11 IST 2010.
    -->
    update users
    set username = #record.username:VARCHAR#,
      id = #record.id:BIGINT#,
      password = #record.password:VARCHAR#,
      s_first_name = #record.sFirstName:VARCHAR#,
      s_last_name = #record.sLastName:VARCHAR#,
      d_birthday = #record.dBirthday:DATE#,
      phone_no= #record.phoneNo:VARCHAR#,
      s_company_reg_no = #record.sCompanyRegNo:VARCHAR#,
      s_tax_reg_no = #record.sTaxRegNo:VARCHAR#,
      s_company_logo = #record.sCompanyLogo:VARCHAR#,
      s_paypal_address = #record.sPaypalAddress:VARCHAR#,
      s_heard_from = #record.sHeardFrom:VARCHAR#,
      s_coupon_code = #record.sCouponCode:VARCHAR#,
      s_affiliate_code = #record.sAffiliateCode:VARCHAR#,
      d_joined_on = #record.dJoinedOn:TIMESTAMP#,
      d_updated_on = #record.dUpdatedOn:TIMESTAMP#,
      s_activation_key = #record.sActivationKey:VARCHAR#,
      b_custom_copyright_page=#record.bCustomCopyrightPage:BIT#,
      s_webapp_url_mapping = #record.sWebappUrlMapping:VARCHAR#,
      s_webapp_domain_name = #record.sWebappDomainName:VARCHAR#,
      b_iphone = #record.bIphone:BIT#,
      b_ipad = #record.bIpad:BIT#,
      b_android = #record.bAndroid:BIT#,
      b_webapp = #record.bWebapp:BIT#,
      disk_space_pricing_id = #record.diskSpacePricingId:BIGINT#,
      enabled = #record.enabled:BIT#,
      order_return_url = #record.orderReturnUrl:VARCHAR#
    <isParameterPresent >
      <include refid="users.Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="updateByPrimaryKeySelective" parameterClass="com.mobicart.model.User" >
    update users
    <dynamic prepend="set" >
      <isNotNull prepend="," property="id" >
        id = #id:BIGINT#
      </isNotNull>
      <isNotNull prepend="," property="password" >
        password = #password:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sFirstName" >
        s_first_name = #sFirstName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sLastName" >
        s_last_name = #sLastName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dBirthday" >
        d_birthday = #dBirthday:DATE#
      </isNotNull>
      <isNotNull prepend="," property="phoneNo" >
        phone_no = #phoneNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sCompanyRegNo" >
        s_company_reg_no = #sCompanyRegNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sTaxRegNo" >
        s_tax_reg_no = #sTaxRegNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sCompanyLogo" >
        s_company_logo = #sCompanyLogo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sPaypalAddress" >
        s_paypal_address = #sPaypalAddress:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sHeardFrom" >
        s_heard_from = #sHeardFrom:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sCouponCode" >
        s_coupon_code = #sCouponCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sAffiliateCode" >
        s_affiliate_code = #sAffiliateCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="dJoinedOn" >
        d_joined_on = #dJoinedOn:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="dUpdatedOn" >
        d_updated_on = #dUpdatedOn:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="sActivationKey" >
        s_activation_key = #sActivationKey:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="bCustomCopyrightPage" >
        b_custom_copyright_page=#bCustomCopyrightPage:BIT#
      </isNotNull>
   <isNotNull prepend="," property="sWebappUrlMapping" >
        s_webapp_url_mapping = #sWebappUrlMapping:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sWebappDomainName" >
        s_webapp_domain_name = #sWebappDomainName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="bIphone" >
        b_iphone = #bIphone:BIT#
      </isNotNull>
      <isNotNull prepend="," property="bIpad" >
        b_ipad = #bIpad:BIT#
      </isNotNull>
      <isNotNull prepend="," property="bAndroid" >
        b_android = #bAndroid:BIT#
      </isNotNull>
      <isNotNull prepend="," property="bWebapp" >
        b_webapp = #bWebapp:BIT#
      </isNotNull>
      <isNotNull prepend="," property="diskSpacePricingId" >
        disk_space_pricing_id = #diskSpacePricingId:BIGINT#
      </isNotNull>
      <isNotNull prepend="," property="enabled" >
        enabled = #enabled:BIT#
      </isNotNull>
      <isNotNull prepend="," property="orderReturnUrl" >
        order_return_url = #orderReturnUrl:VARCHAR#
      </isNotNull>
    </dynamic>
    where username = #username:VARCHAR#
  </update>
  <update id="updateByPrimaryKey" parameterClass="com.mobicart.model.User" >
    update users
    set id = #id:BIGINT#,
      password = #password:VARCHAR#,
      s_first_name = #sFirstName:VARCHAR#,
      s_last_name = #sLastName:VARCHAR#,
      d_birthday = #dBirthday:DATE#,
      phone_no = #phoneNo:VARCHAR#,
      s_company_reg_no = #sCompanyRegNo:VARCHAR#,
      s_tax_reg_no = #sTaxRegNo:VARCHAR#,
      s_company_logo = #sCompanyLogo:VARCHAR#,
      s_paypal_address = #sPaypalAddress:VARCHAR#,
      s_heard_from = #sHeardFrom:VARCHAR#,
      s_coupon_code = #sCouponCode:VARCHAR#,
      s_affiliate_code = #sAffiliateCode:VARCHAR#,
      d_joined_on = #dJoinedOn:TIMESTAMP#,
      d_updated_on = #dUpdatedOn:TIMESTAMP#,
      s_activation_key = #sActivationKey:VARCHAR#,
      b_custom_copyright_page=#bCustomCopyrightPage:BIT#
      s_webapp_url_mapping = #sWebappUrlMapping:VARCHAR#,
      s_webapp_domain_name = #sWebappDomainName:VARCHAR#,
      b_iphone = #bIphone:BIT#,
      b_ipad = #bIpad:BIT#,
      b_android = #bAndroid:BIT#,
      b_webapp = #bWebapp:BIT#,
      disk_space_pricing_id = #diskSpacePricingId:BIGINT#,
      enabled = #enabled:BIT#,
      order_return_url = #orderReturnUrl:VARCHAR#,
    where username = #username:VARCHAR#
  </update>
  
  
  <parameterMap id="searchUsersMapCall" class="java.util.Map">
  		<parameter property="txtSearch" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
  		<parameter property="role" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
  		<parameter property="orderByClause" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
        <parameter property="lowerLimit" jdbcType="NUMERIC" javaType="java.lang.Integer" mode="IN"/>
   		<parameter property="upperLimit" jdbcType="NUMERIC" javaType="java.lang.Integer" mode="IN"/>  
        <parameter property="totalCount" jdbcType="NUMERIC" javaType="java.lang.Integer" mode="OUT"/>
    </parameterMap>
	
	<procedure id="searchUsers" resultMap="baseResultMap" parameterMap="searchUsersMapCall">
	   {CALL search_users(?,?,?,?,?,?)} 
	</procedure>
	
  
</sqlMap>